import{u as g,r as d,c as v,a as s,w as C,b as r,v as p,d as u,n as m,e as b,f as h,_ as y,g as k,o as x,h as V,i as c}from"./index-C4N9NuUn.js";const U={id:"signUpPage",class:"bg-yellow"},$={class:"container signUpPage vhContainer"},M=s("div",{class:"side"},[s("a",{href:"#"},[s("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),s("img",{class:"d-m-n signUpImage",src:y,alt:"workImg"})],-1),P=s("h2",{class:"formControls_txt"},"註冊帳號",-1),T=s("label",{class:"formControls_label",for:"email"},"Email",-1),q=s("label",{class:"formControls_label",for:"name"},"您的暱稱",-1),B=s("label",{class:"formControls_label",for:"password"},"密碼",-1),I=["type"],N=s("label",{class:"formControls_label",for:"passwordConfirm"},"再次輸入密碼",-1),D=["type"],E=s("input",{class:"formControls_btnSubmit",type:"submit",value:"註冊帳號"},null,-1),f="https://todolist-api.hexschool.io",z={__name:"registerView",setup(R){const w=g(),e=d({email:"",password:"",nickname:"",passwordConfirm:""}),l=d({password:!1,passwordConfirm:!1}),i=n=>{l.value[n]=!l.value[n]},_=async()=>{var n,o;if(e.value.password!==e.value.passwordConfirm){console.error("密碼和確認密碼不一致"),alert("密碼和確認密碼不一致");return}try{await c.post(`${f}/users/sign_up`,e.value);const t=await c.post(`${f}/users/sign_in`,{email:e.value.email,password:e.value.password});document.cookie=`customTodoToken=${t.data.token}; path=/; secure; samesite=strict`,alert("註冊成功"),w.push("/login")}catch(t){const a=((o=(n=t.response)==null?void 0:n.data)==null?void 0:o.message)||t.message;alert(`註冊失敗: ${a}`),console.error("註冊失敗:",t.response?t.response.data:t.message)}};return(n,o)=>{const t=k("router-link");return x(),v("div",U,[s("div",$,[M,s("div",null,[s("form",{class:"formControls",onSubmit:C(_,["prevent"])},[P,T,r(s("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:"","onUpdate:modelValue":o[0]||(o[0]=a=>e.value.email=a)},null,512),[[p,e.value.email]]),q,r(s("input",{class:"formControls_input",type:"text",id:"name",name:"nickname",placeholder:"請輸入您的暱稱","onUpdate:modelValue":o[1]||(o[1]=a=>e.value.nickname=a)},null,512),[[p,e.value.nickname]]),B,r(s("input",{class:"formControls_input",type:l.value?"text":"password",id:"password",name:"password",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":o[2]||(o[2]=a=>e.value.password=a)},null,8,I),[[u,e.value.password]]),s("button",{type:"button",class:"password-toggle-button",onClick:o[3]||(o[3]=a=>i("password"))},[s("i",{class:m(l.value?"fa fa-eye":"fa fa-eye-slash")},null,2)]),N,r(s("input",{class:"formControls_input",type:l.value==="passwordConfirm"?"text":"password",id:"passwordConfirm",name:"passwordConfirm",placeholder:"請再次輸入密碼",required:"","onUpdate:modelValue":o[4]||(o[4]=a=>e.value.passwordConfirm=a)},null,8,D),[[u,e.value.passwordConfirm]]),s("button",{type:"button",class:"password-toggle-button",onClick:o[5]||(o[5]=a=>i("passwordConfirm"))},[s("i",{class:m(l.value?"fa fa-eye":"fa fa-eye-slash")},null,2)]),E,b(t,{to:"/login",class:"formControls_btnLink"},{default:h(()=>[V("登入")]),_:1})],32)])])])}}};export{z as default};
